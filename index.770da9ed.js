let e=window.scrollY;const t=document.querySelector(".header"),s=t.offsetHeight;window.addEventListener("scroll",(function(){e=window.scrollY,e>=s?t.classList.add("header--onscroll"):t.classList.remove("header--onscroll")}));const o=document.querySelector(".hamburger"),r=document.querySelector(".menu"),n=r.querySelectorAll(".menu__link"),i=()=>{o.classList.toggle("hamburger--isopen"),r.classList.toggle("menu--isopen")};o.addEventListener("click",i),n.forEach((e=>e.addEventListener("click",i)));const c=document.querySelectorAll(".section");window.addEventListener("scroll",(()=>{let e="";c.forEach((t=>{const s=t.offsetTop,o=t.clientHeight;window.scrollY>=s-o/4&&(e=t.getAttribute("id"))})),n.forEach((t=>{t.classList.remove("menu__link--active"),t.classList.contains(e)&&t.classList.add("menu__link--active")}))}));const a=document.querySelector("#contactForm"),l=a.querySelectorAll("input[required], textarea[required]");a.setAttribute("novalidate",!0);const d=function(e){const t=e.closest(".form-row").querySelector(".field-error");null!==t&&t.remove()};[...l].forEach((e=>{e.addEventListener("input",(function(){this.checkValidity()?(this.classList.remove("error"),d(this)):this.classList.add("error")}))}));const u=function(e){let t=!0;return[...e].forEach((e=>{e.checkValidity()?(d(e),e.classList.remove("error")):(!function(e){const t=e.closest(".form-row");if(null===t.querySelector(".field-error")){const s=e.dataset.error,o=document.createElement("div");o.classList.add("field-error"),o.innerText=s,t.appendChild(o)}}(e),e.classList.add("error"),t=!1)})),t};a.addEventListener("submit",(function(e){if(e.preventDefault(),u(l)){const e=a.querySelectorAll("input:not(:disabled), textarea:not(:disabled), select:not(:disabled)"),t=new FormData;[...e].forEach((e=>t.append(e.name,e.value)));const s=a.getAttribute("action"),o=a.getAttribute("method"),r=a.querySelector('[type="submit"]');r.disabled=!0,r.classList.add("element-is-busy"),fetch(s,{method:o.toUpperCase(),body:t}).then((e=>e.json())).then((e=>{if(r.disabled=!1,r.classList.remove("element-is-busy"),e.errors){e.errors.map((function(e){return'[name="'+e+'"]'}));const t=e.errors.join(",");u(a.querySelectorAll(t))}else{if("ok"===e.status){const e=document.createElement("div");e.classList.add("form-send-success"),e.innerText="Wysłanie wiadomości się powiodło się",a.parentElement.insertBefore(e,a),e.innerHTML="<strong>Wiadomość została wysłana.</strong><span> Dziękujemy za kontakt. Postaramy się odpowiedzieć jak najszybciej.</span>",a.reset()}if("error"===e.status){const e=document.createElement("div");e.classList.add("send-error"),e.innerText="Wysłanie wiadomości się nie powiodło"}}})).catch((e=>{r.disabled=!1,r.classList.remove("element-is-busy")}))}}));